{"version":3,"file":"4257d6e1.js","sources":["../../../node_modules/@shopify/hydrogen/dist/esnext/utilities/isBrowser/isBrowser.js","../../../node_modules/@shopify/hydrogen/dist/esnext/components/AddToCartButton/AddToCartButton.client.js","../../../src/components/product/ProductForm.client.jsx","../../../src/components/product/ProductOptions.client.jsx"],"sourcesContent":["/** The `isClient` utility is a function that returns a boolean indicating\n * if the code was run in the browser.\n */\nexport function isBrowser() {\n    return typeof document !== 'undefined';\n}\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { useCart } from '../CartProvider';\nimport { useProductOptions } from '../ProductOptionsProvider';\nimport { BaseButton } from '../BaseButton';\n/**\n * The `AddToCartButton` component renders a button that adds an item to the cart when pressed.\n * It must be a descendent of the `CartProvider` component.\n */\nexport function AddToCartButton(props) {\n    const [addingItem, setAddingItem] = useState(false);\n    const { variantId: explicitVariantId, quantity = 1, attributes, onClick, children, accessibleAddingToCartLabel, ...passthroughProps } = props;\n    const { status, linesAdd } = useCart();\n    const { selectedVariant } = useProductOptions();\n    const variantId = explicitVariantId ?? selectedVariant?.id ?? '';\n    const disabled = explicitVariantId === null ||\n        variantId === '' ||\n        selectedVariant === null ||\n        addingItem ||\n        passthroughProps.disabled;\n    useEffect(() => {\n        if (addingItem && status === 'idle') {\n            setAddingItem(false);\n        }\n    }, [status, addingItem]);\n    const handleAddItem = useCallback(() => {\n        setAddingItem(true);\n        linesAdd([\n            {\n                quantity,\n                merchandiseId: variantId,\n                attributes,\n            },\n        ]);\n    }, [linesAdd, quantity, variantId, attributes]);\n    return (React.createElement(React.Fragment, null,\n        React.createElement(BaseButton, { ...passthroughProps, disabled: disabled, onClick: onClick, defaultOnClick: handleAddItem }, children),\n        accessibleAddingToCartLabel ? (React.createElement(\"p\", { style: {\n                position: 'absolute',\n                width: '1px',\n                height: '1px',\n                padding: '0',\n                margin: '-1px',\n                overflow: 'hidden',\n                clip: 'rect(0, 0, 0, 0)',\n                whiteSpace: 'nowrap',\n                borderWidth: '0',\n            }, role: \"alert\", \"aria-live\": \"assertive\" }, addingItem ? accessibleAddingToCartLabel : null)) : null));\n}\n","import {useEffect, useCallback, useState} from 'react';\n\nimport {\n  useProductOptions,\n  isBrowser,\n  useUrl,\n  AddToCartButton,\n  Money,\n  ShopPayButton,\n} from '@shopify/hydrogen';\n\nimport {Heading, Text, Button, ProductOptions} from '~/components';\n\nexport function ProductForm() {\n  const {pathname, search} = useUrl();\n  const [params, setParams] = useState(new URLSearchParams(search));\n\n  const {options, setSelectedOption, selectedOptions, selectedVariant} =\n    useProductOptions();\n\n  const isOutOfStock = !selectedVariant?.availableForSale || false;\n  const isOnSale =\n    selectedVariant?.priceV2?.amount <\n      selectedVariant?.compareAtPriceV2?.amount || false;\n\n  useEffect(() => {\n    if (params || !search) return;\n    setParams(new URLSearchParams(search));\n  }, [params, search]);\n\n  useEffect(() => {\n    options.map(({name, values}) => {\n      if (!params) return;\n      const currentValue = params.get(name.toLowerCase()) || null;\n      if (currentValue) {\n        const matchedValue = values.filter(\n          (value) => encodeURIComponent(value.toLowerCase()) === currentValue,\n        );\n        setSelectedOption(name, matchedValue[0]);\n      } else {\n        params.set(\n          encodeURIComponent(name.toLowerCase()),\n          encodeURIComponent(selectedOptions[name].toLowerCase()),\n        ),\n          window.history.replaceState(\n            null,\n            '',\n            `${pathname}?${params.toString()}`,\n          );\n      }\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleChange = useCallback(\n    (name, value) => {\n      setSelectedOption(name, value);\n      if (!params) return;\n      params.set(\n        encodeURIComponent(name.toLowerCase()),\n        encodeURIComponent(value.toLowerCase()),\n      );\n      if (isBrowser()) {\n        window.history.replaceState(\n          null,\n          '',\n          `${pathname}?${params.toString()}`,\n        );\n      }\n    },\n    [setSelectedOption, params, pathname],\n  );\n\n  return (\n    <form className=\"grid gap-10\">\n      {\n        <div className=\"grid gap-4\">\n          {options.map(({name, values}) => {\n            if (values.length === 1) {\n              return null;\n            }\n            return (\n              <div\n                key={name}\n                className=\"flex flex-col flex-wrap mb-4 gap-y-2 last:mb-0\"\n              >\n                <Heading as=\"legend\" size=\"lead\" className=\"min-w-[4rem]\">\n                  {name}\n                </Heading>\n                <div className=\"flex flex-wrap items-baseline gap-4\">\n                  <ProductOptions\n                    name={name}\n                    handleChange={handleChange}\n                    values={values}\n                  />\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      }\n      <div className=\"grid items-stretch gap-4\">\n        <AddToCartButton\n          variantId={selectedVariant?.id}\n          quantity={1}\n          accessibleAddingToCartLabel=\"Adding item to your cart\"\n          disabled={isOutOfStock}\n        >\n          <Button\n            width=\"full\"\n            variant={isOutOfStock ? 'secondary' : 'primary'}\n            as=\"span\"\n          >\n            {isOutOfStock ? (\n              <Text>Sold out</Text>\n            ) : (\n              <Text\n                as=\"span\"\n                className=\"flex items-center justify-center gap-2\"\n              >\n                <span>Add to bag</span> <span>Â·</span>{' '}\n                <Money\n                  withoutTrailingZeros\n                  data={selectedVariant.priceV2}\n                  as=\"span\"\n                />\n                {isOnSale && (\n                  <Money\n                    withoutTrailingZeros\n                    data={selectedVariant.compareAtPriceV2}\n                    as=\"span\"\n                    className=\"opacity-50 strike\"\n                  />\n                )}\n              </Text>\n            )}\n          </Button>\n        </AddToCartButton>\n        {!isOutOfStock && <ShopPayButton variantIds={[selectedVariant.id]} />}\n      </div>\n    </form>\n  );\n}\n","import {useCallback, useState} from 'react';\n// @ts-expect-error @headlessui/react incompatibility with node16 resolution\nimport {Listbox} from '@headlessui/react';\nimport {useProductOptions} from '@shopify/hydrogen';\n\nimport {Text, IconCheck, IconCaret} from '~/components';\n\nexport function ProductOptions({values, ...props}) {\n  const asDropdown = values.length > 7;\n\n  return asDropdown ? (\n    <OptionsDropdown values={values} {...props} />\n  ) : (\n    <OptionsGrid values={values} {...props} />\n  );\n}\n\nfunction OptionsGrid({values, name, handleChange}) {\n  const {selectedOptions} = useProductOptions();\n\n  return (\n    <>\n      {values.map((value) => {\n        const checked = selectedOptions[name] === value;\n        const id = `option-${name}-${value}`;\n\n        return (\n          <Text as=\"label\" key={id} htmlFor={id}>\n            <input\n              className=\"sr-only\"\n              type=\"radio\"\n              id={id}\n              name={`option[${name}]`}\n              value={value}\n              checked={checked}\n              onChange={() => handleChange(name, value)}\n            />\n            <div\n              className={`leading-none py-1 border-b-[1.5px] cursor-pointer transition-all duration-200 ${\n                checked ? 'border-primary/50' : 'border-primary/0'\n              }`}\n            >\n              {value}\n            </div>\n          </Text>\n        );\n      })}\n    </>\n  );\n}\n\n// TODO: De-dupe UI with CountrySelector\nfunction OptionsDropdown({values, name, handleChange}) {\n  const [listboxOpen, setListboxOpen] = useState(false);\n  const {selectedOptions} = useProductOptions();\n\n  const updateSelectedOption = useCallback(\n    (value) => {\n      handleChange(name, value);\n    },\n    [name, handleChange],\n  );\n\n  return (\n    <div className=\"relative w-full\">\n      <Listbox onChange={updateSelectedOption} value=\"\">\n        {/* @ts-expect-error @headlessui/react incompatibility with node16 resolution */}\n        {({open}) => {\n          setTimeout(() => setListboxOpen(open));\n          return (\n            <>\n              <Listbox.Button\n                className={`flex items-center justify-between w-full py-3 px-4 border border-primary ${\n                  open ? 'rounded-b md:rounded-t md:rounded-b-none' : 'rounded'\n                }`}\n              >\n                <span>{selectedOptions[name]}</span>\n                <IconCaret direction={open ? 'up' : 'down'} />\n              </Listbox.Button>\n\n              <Listbox.Options\n                className={`border-primary bg-contrast absolute bottom-12 z-30 grid\n                h-48 w-full overflow-y-scroll rounded-t border px-2 py-2 transition-[max-height]\n                duration-150 sm:bottom-auto md:rounded-b md:rounded-t-none md:border-t-0 md:border-b ${\n                  listboxOpen ? 'max-h-48' : 'max-h-0'\n                }`}\n              >\n                {values.map((value) => {\n                  const isSelected = selectedOptions[name] === value;\n                  const id = `option-${name}-${value}`;\n\n                  return (\n                    <Listbox.Option key={id} value={value}>\n                      {/* @ts-expect-error @headlessui/react incompatibility with node16 resolution */}\n                      {({active}) => (\n                        <div\n                          className={`text-primary w-full p-2 transition rounded flex justify-start items-center text-left cursor-pointer ${\n                            active ? 'bg-primary/10' : null\n                          }`}\n                        >\n                          {value}\n                          {isSelected ? (\n                            <span className=\"ml-2\">\n                              <IconCheck />\n                            </span>\n                          ) : null}\n                        </div>\n                      )}\n                    </Listbox.Option>\n                  );\n                })}\n              </Listbox.Options>\n            </>\n          );\n        }}\n      </Listbox>\n    </div>\n  );\n}\n"],"names":["props","addingItem","setAddingItem","useState","variantId","explicitVariantId","quantity","attributes","onClick","children","accessibleAddingToCartLabel","passthroughProps","status","linesAdd","useCart","selectedVariant","useProductOptions","id","disabled","useEffect","handleAddItem","useCallback","merchandiseId","_jsxs","_Fragment","_jsx","position","width","height","padding","margin","overflow","clip","whiteSpace","borderWidth","pathname","search","useUrl","params","setParams","URLSearchParams","options","setSelectedOption","selectedOptions","isOutOfStock","availableForSale","isOnSale","priceV2","amount","compareAtPriceV2","map","name","values","currentValue","get","toLowerCase","matchedValue","filter","value","encodeURIComponent","set","window","history","replaceState","toString","handleChange","isBrowser","length","asDropdown","checked","listboxOpen","setListboxOpen","updateSelectedOption","Listbox","open","isSelected","active"],"mappings":"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"}