{"version":3,"file":"83722c30.js","sources":["../../../src/components/account/AccountActivateForm.client.jsx"],"sourcesContent":["import {useState} from 'react';\nimport {useNavigate} from '@shopify/hydrogen/client';\n\nexport function AccountActivateForm({id, activationToken}) {\n  const navigate = useNavigate();\n\n  const [submitError, setSubmitError] = useState(null);\n  const [password, setPassword] = useState('');\n  const [passwordError, setPasswordError] = useState(null);\n  const [passwordConfirm, setPasswordConfirm] = useState('');\n  const [passwordConfirmError, setPasswordConfirmError] = useState(null);\n\n  function passwordValidation(form) {\n    setPasswordError(null);\n    setPasswordConfirmError(null);\n\n    let hasError = false;\n\n    if (!form.password.validity.valid) {\n      hasError = true;\n      setPasswordError(\n        form.password.validity.valueMissing\n          ? 'Please enter a password'\n          : 'Passwords must be at least 6 characters',\n      );\n    }\n\n    if (!form.passwordConfirm.validity.valid) {\n      hasError = true;\n      setPasswordConfirmError(\n        form.password.validity.valueMissing\n          ? 'Please re-enter a password'\n          : 'Passwords must be at least 6 characters',\n      );\n    }\n\n    if (password !== passwordConfirm) {\n      hasError = true;\n      setPasswordConfirmError('The two passwords entered did not match.');\n    }\n\n    return hasError;\n  }\n\n  async function onSubmit(event) {\n    event.preventDefault();\n\n    if (passwordValidation(event.currentTarget)) {\n      return;\n    }\n\n    const response = await callActivateApi({\n      id,\n      activationToken,\n      password,\n    });\n\n    if (response.error) {\n      setSubmitError(response.error);\n      return;\n    }\n\n    navigate('/account');\n  }\n\n  return (\n    <div className=\"flex justify-center\">\n      <div className=\"w-full max-w-md\">\n        <h1 className=\"text-4xl\">Activate Account.</h1>\n        <p className=\"mt-4\">Create your password to activate your account.</p>\n        <form noValidate className=\"pt-6 pb-8 mt-4 mb-4\" onSubmit={onSubmit}>\n          {submitError && (\n            <div className=\"flex items-center justify-center mb-6 bg-primary/30\">\n              <p className=\"m-4 text-s text-contrast\">{submitError}</p>\n            </div>\n          )}\n          <div className=\"mb-4\">\n            <input\n              className={`mb-1 appearance-none border w-full py-2 px-3 text-primary placeholder:text-primary/30 leading-tight focus:shadow-outline ${\n                passwordError ? ' border-notice' : 'border-primary'\n              }`}\n              id=\"password\"\n              name=\"password\"\n              type=\"password\"\n              autoComplete=\"current-password\"\n              placeholder=\"Password\"\n              aria-label=\"Password\"\n              value={password}\n              minLength={8}\n              required\n              onChange={(event) => {\n                setPassword(event.target.value);\n              }}\n            />\n            <p\n              className={`text-red-500 text-xs ${\n                !passwordError ? 'invisible' : ''\n              }`}\n            >\n              {passwordError} &nbsp;\n            </p>\n          </div>\n          <div className=\"mb-4\">\n            <input\n              className={`mb-1 appearance-none border w-full py-2 px-3 text-primary/90 placeholder:text-primary/50 leading-tight focus:shadow-outline ${\n                passwordConfirmError ? ' border-red-500' : 'border-gray-900'\n              }`}\n              id=\"passwordConfirm\"\n              name=\"passwordConfirm\"\n              type=\"password\"\n              autoComplete=\"current-password\"\n              placeholder=\"Re-enter password\"\n              aria-label=\"Re-enter password\"\n              value={passwordConfirm}\n              required\n              minLength={8}\n              onChange={(event) => {\n                setPasswordConfirm(event.target.value);\n              }}\n            />\n            <p\n              className={`text-red-500 text-xs ${\n                !passwordConfirmError ? 'invisible' : ''\n              }`}\n            >\n              {passwordConfirmError} &nbsp;\n            </p>\n          </div>\n          <div className=\"flex items-center justify-between\">\n            <button\n              className=\"block w-full px-4 py-2 text-contrast uppercase bg-gray-900 focus:shadow-outline\"\n              type=\"submit\"\n            >\n              Save\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nasync function callActivateApi({id, activationToken, password}) {\n  try {\n    const res = await fetch(`/account/activate`, {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({id, activationToken, password}),\n    });\n    if (res.ok) {\n      return {};\n    } else {\n      return res.json();\n    }\n  } catch (error) {\n    return {\n      error: error.toString(),\n    };\n  }\n}\n"],"names":["id","activationToken","navigate","useNavigate","submitError","setSubmitError","useState","password","setPassword","passwordError","setPasswordError","passwordConfirm","setPasswordConfirm","passwordConfirmError","setPasswordConfirmError","form","hasError","validity","valid","valueMissing","event","passwordValidation","preventDefault","currentTarget","response","callActivateApi","error","_jsx","_jsxs","target","value","res","fetch","method","headers","Accept","body","JSON","stringify","ok","json","toString"],"mappings":"oTAGoC,WAAA,CAACA,KAAIC,mBAAkB,CACzD,KAAMC,GAAWC,IAEX,CAACC,EAAaC,GAAkBC,EAAAA,QAAAA,SAAS,IAAD,EACxC,CAACC,EAAUC,GAAeF,EAAAA,QAAAA,SAAS,EAAD,EAClC,CAACG,EAAeC,GAAoBJ,EAAAA,QAAAA,SAAS,IAAD,EAC5C,CAACK,EAAiBC,GAAsBN,EAAAA,QAAAA,SAAS,EAAD,EAChD,CAACO,EAAsBC,GAA2BR,EAAAA,QAAAA,SAAS,IAAD,EAEhE,WAA4BS,EAAM,CAChCL,EAAiB,IAAD,EAChBI,EAAwB,IAAD,EAEvB,GAAIE,GAAW,GAEf,MAAKD,GAAKR,SAASU,SAASC,OACf,GAAA,GACXR,EACEK,EAAKR,SAASU,SAASE,aACnB,0BACA,yCAHU,GAObJ,EAAKJ,gBAAgBM,SAASC,OACtB,GAAA,GACXJ,EACEC,EAAKR,SAASU,SAASE,aACnB,6BACA,yCAHiB,GAOrBZ,IAAaI,GACJ,GAAA,GACXG,EAAwB,0CAAD,GAGlBE,CACR,CAED,iBAAwBI,EAAO,CAGzBC,GAFJD,EAAME,eAAN,EAEID,EAAmBD,EAAMG,aAAP,EACpB,OAGIC,KAAAA,GAAW,KAAMC,GAAgB,CACrCzB,KACAC,kBACAM,UAAAA,CAHoC,EAMtC,GAAIiB,EAASE,MAAO,CAClBrB,EAAemB,EAASE,KAAV,EACd,MACD,CAEDxB,EAAS,UAAD,CACT,CAED,SACE,MAAA,CAAK,UAAU,sBAAf,WACE,MAAA,CAAK,UAAU,kBAAf,SACE,CAAAyB,EAAA,KAAA,CAAI,UAAU,WAAd,SAAA,mBAAA,CAAA,EACAA,EAAA,IAAA,CAAG,UAAU,OAAb,SAAA,gDAAA,CAAA,EACAC,EAAA,OAAA,CAAM,WAAN,GAAiB,UAAU,sBAAsB,WAAjD,SAAA,CACGxB,GACCuB,EAAA,MAAA,CAAK,UAAU,sDAAf,WACE,IAAA,CAAG,UAAU,2BAAb,SAAyCvB,CAAAA,CAAzC,CAAA,CADF,EAIFwB,EAAA,MAAA,CAAK,UAAU,OAAf,SACE,CAAAD,EAAA,QAAA,CACE,UAAY,4HACVlB,EAAgB,iBAAmB,mBAErC,GAAG,WACH,KAAK,WACL,KAAK,WACL,aAAa,mBACb,YAAY,WACZ,aAAW,WACX,MAAOF,EACP,UAAW,EACX,SAZF,GAaE,SAAWa,AAAU,GAAA,CACPA,EAAAA,EAAMS,OAAOC,KAAd,CACZ,CAAA,CAfH,EAiBAF,EAAA,IAAA,CACE,UAAY,wBACV,AAACnB,EAA8B,GAAd,cAFrB,SAAA,CAKGA,EALH,OAAA,CAAA,CAlBF,CAAA,CAAA,CAAA,EA0BAmB,EAAA,MAAA,CAAK,UAAU,OAAf,SACE,CAAAD,EAAA,QAAA,CACE,UAAY,+HACVd,EAAuB,kBAAoB,oBAE7C,GAAG,kBACH,KAAK,kBACL,KAAK,WACL,aAAa,mBACb,YAAY,oBACZ,aAAW,oBACX,MAAOF,EACP,SAXF,GAYE,UAAW,EACX,SAAWS,AAAU,GAAA,CACAA,EAAAA,EAAMS,OAAOC,KAAd,CACnB,CAAA,CAfH,EAiBAF,EAAA,IAAA,CACE,UAAY,wBACV,AAACf,EAAqC,GAAd,cAF5B,SAAA,CAKGA,EALH,OAAA,CAAA,CAlBF,CAAA,CAAA,CAAA,EA0BAc,EAAA,MAAA,CAAK,UAAU,oCAAf,WACE,SAAA,CACE,UAAU,kFACV,KAAK,SAFP,SAAA,MAAA,CAAA,CAAA,CA3DJ,CAAA,CAAA,CAHF,CAAA,CAAA,CAAA,CAAA,CAFJ,CA2ED,CAED,iBAA+B,CAAC3B,KAAIC,kBAAiBM,YAAW,CAC1D,GAAA,CACIwB,KAAAA,GAAM,KAAMC,OAAO,oBAAoB,CAC3CC,OAAQ,OACRC,QAAS,CACPC,OAAQ,mBACR,eAAgB,kBAFT,EAITC,KAAMC,KAAKC,UAAU,CAACtC,KAAIC,kBAAiBM,UAAAA,CAArC,CAAA,CANe,EAQvB,MAAIwB,GAAIQ,GACC,GAEAR,EAAIS,aAENd,GACA,MAAA,CACLA,MAAOA,EAAMe,SAAN,CAAA,CAEV,CACF"}