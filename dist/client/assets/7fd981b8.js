import"./dabb404c.js";import{r as t,a as o,F as D,j as e}from"./index.fcab2dec.js";import"./a3fdab35.js";import"./42bd6d0f.js";import"./c96332aa.js";import"./979bc475.js";import"./f36cacbb.js";import"./4713b2c7.js";import{Seo as B}from"./e763dc29.js";import"./adcb9f3b.js";import"./16a2d653.js";import{u as H,e as I,p as $}from"./199713ed.js";import{B as z}from"./086354ff.js";import{T as w}from"./25854493.js";import"./2d42f978.js";/* empty css        */import{M as J}from"./6bb1adec.js";import"./4dcec775.js";import"./b453c200.js";import"./631dadab.js";import"./7940f5e2.js";import"./92add5bc.js";function O({firstName:a="",lastName:l="",phone:s="",email:i="",close:d}){const[c,n]=t.exports.useState(!1),[y,L]=t.exports.useState(a),[b,M]=t.exports.useState(l),[N,k]=t.exports.useState(s),[v,R]=t.exports.useState(i),[x,P]=t.exports.useState(null),[E,C]=t.exports.useState(null),[S,T]=t.exports.useState(null),[m,A]=t.exports.useState(null),[j,U]=t.exports.useState(null),V=H();async function q(r){r.preventDefault(),P(null),C(null),T(null),A(null);const f=I(r.currentTarget.email);f&&P(f);let p,u,h;if(r.currentTarget.currentPassword.value&&(p=$(r.currentTarget.currentPassword),p&&C(p),u=$(r.currentTarget.newPassword),u&&T(u),h=r.currentTarget.newPassword.value!==r.currentTarget.newPassword2.value?"The two passwords entered did not match":null,h&&A(h)),f||p||u||h)return;n(!0);const F=await _({email:v,newPassword:r.currentTarget.newPassword.value,currentPassword:r.currentTarget.currentPassword.value,phone:N,firstName:y,lastName:b});if(n(!1),F.error){U(F.error);return}V(),d()}return o(D,{children:[e(w,{className:"mt-4 mb-6",as:"h3",size:"lead",children:"Update your profile"}),o("form",{noValidate:!0,onSubmit:q,children:[j&&e("div",{className:"flex items-center justify-center mb-6 bg-red-100 rounded",children:e("p",{className:"m-4 text-sm text-red-900",children:j})}),e("div",{className:"mt-3",children:e("input",{className:"appearance-none border w-full py-2 px-3 text-primary/90 placeholder:text-primary/50 leading-tight focus:shadow-outline border-gray-500 rounded",id:"firstname",name:"firstname",type:"text",autoComplete:"given-name",placeholder:"First name","aria-label":"First name",value:y,onChange:r=>{L(r.target.value)}})}),e("div",{className:"mt-3",children:e("input",{className:"appearance-none border w-full py-2 px-3 text-primary/90 placeholder:text-primary/50 leading-tight focus:shadow-outline border-gray-500 rounded",id:"lastname",name:"lastname",type:"text",autoComplete:"family-name",placeholder:"Last name","aria-label":"Last name",value:b,onChange:r=>{M(r.target.value)}})}),e("div",{className:"mt-3",children:e("input",{className:"appearance-none border w-full py-2 px-3 text-primary/90 placeholder:text-primary/50 leading-tight focus:shadow-outline border-gray-500 rounded",id:"phone",name:"phone",type:"tel",autoComplete:"tel",placeholder:"Mobile","aria-label":"Mobile",value:N,onChange:r=>{k(r.target.value)}})}),o("div",{className:"mt-3",children:[e("input",{className:`appearance-none border w-full py-2 px-3 text-primary/90 placeholder:text-primary/50 leading-tight focus:shadow-outline rounded ${x?" border-red-500":"border-gray-500"}`,id:"email",name:"email",type:"email",autoComplete:"email",required:!0,placeholder:"Email address","aria-label":"Email address",value:v,onChange:r=>{R(r.target.value)}}),o("p",{className:`text-red-500 text-xs ${x?"":"invisible"}`,children:[x," \xA0"]})]}),e(w,{className:"mb-6 mt-6",as:"h3",size:"lead",children:"Change your password"}),e(g,{name:"currentPassword",label:"Current password",passwordError:E}),e(g,{name:"newPassword",label:"New password",passwordError:S}),e(g,{name:"newPassword2",label:"Re-enter new password",passwordError:m}),e(w,{size:"fine",color:"subtle",className:`mt-1 ${E||S?"text-red-500":""}`,children:"Passwords must be at least 6 characters."}),m?e("br",{}):null,o(w,{size:"fine",className:`mt-1 text-red-500 ${m?"":"invisible"}`,children:[m," \xA0"]}),e("div",{className:"mt-6",children:e(z,{className:"text-sm mb-2",variant:"primary",width:"full",type:"submit",disabled:c,children:"Save"})}),e("div",{className:"mb-4",children:e(z,{type:"button",className:"text-sm",variant:"secondary",width:"full",onClick:d,children:"Cancel"})})]})]})}function g({name:a,passwordError:l,label:s}){const[i,d]=t.exports.useState("");return e("div",{className:"mt-3",children:e("input",{className:`appearance-none border w-full py-2 px-3 text-primary/90 placeholder:text-primary/50 leading-tight focus:shadow-outline rounded ${l?" border-red-500":"border-gray-500"}`,id:a,name:a,type:"password",autoComplete:a==="currentPassword"?"current-password":void 0,placeholder:s,"aria-label":s,value:i,minLength:8,required:!0,onChange:c=>{d(c.target.value)}})})}async function _({email:a,phone:l,firstName:s,lastName:i,currentPassword:d,newPassword:c}){try{const n=await fetch("/account",{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:a,phone:l,firstName:s,lastName:i,currentPassword:d,newPassword:c})});return n.ok?{}:n.json()}catch{return{error:"Error saving account. Please try again."}}}function we({firstName:a,lastName:l,phone:s,email:i}){const[d,c]=t.exports.useState(!1),n=()=>c(!1);return o(D,{children:[d?o(J,{close:n,children:[e(B,{type:"noindex",data:{title:"Account details"}}),e(O,{firstName:a,lastName:l,phone:s,email:i,close:n})]}):null,o("div",{className:"grid w-full gap-4 p-4 py-6 md:gap-8 md:p-8 lg:p-12",children:[e("h3",{className:"font-bold text-lead",children:"Account Details"}),o("div",{className:"lg:p-8 p-6 border border-gray-200 rounded",children:[o("div",{className:"flex",children:[e("h3",{className:"font-bold text-base flex-1",children:"Profile & Security"}),e("button",{className:"underline text-sm font-normal",onClick:()=>c(!0),children:"Edit"})]}),e("div",{className:"mt-4 text-sm text-primary/50",children:"Name"}),o("p",{className:"mt-1",children:[a||l?(a?a+" ":"")+l:"Add name"," "]}),e("div",{className:"mt-4 text-sm text-primary/50",children:"Contact"}),e("p",{className:"mt-1",children:s!=null?s:"Add mobile"}),e("div",{className:"mt-4 text-sm text-primary/50",children:"Email address"}),e("p",{className:"mt-1",children:i}),e("div",{className:"mt-4 text-sm text-primary/50",children:"Password"}),e("p",{className:"mt-1",children:"**************"})]})]})]})}export{we as AccountDetails};
//# sourceMappingURL=7fd981b8.js.map
