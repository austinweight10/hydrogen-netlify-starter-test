import{r as M}from"./index.fcab2dec.js";const g=["cdn.shopify.com","cdn.shopifycdn.net","shopify-assets.shopifycdn.com","shopify-assets.shopifycdn.net"],L=["spin.dev"],C=[...g,...L];function _({src:t,width:r,height:h,crop:n,scale:e}){if(e){const u=new URL(t),w=u.pathname.lastIndexOf("."),S=u.pathname.slice(0,w),i=u.pathname.slice(w);u.pathname=`${S}${`@${e.toString()}x`}${i}`,t=u.toString()}const c=new URL(t);return r&&c.searchParams.append("width",r.toString()),h&&c.searchParams.append("height",h.toString()),n&&c.searchParams.append("crop",n),e&&c.searchParams.append("scale",e.toString()),c.toString()}function R(t){const r=new URL(t.src);return!C.some(n=>r.hostname.endsWith(n))||!t.width&&!t.height&&!t.crop&&!t.scale?t.src:_(t)}function U({data:t,loaderOptions:r,elementProps:h}){var e,c,u,w,S,i;let n=null;return(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&(n=(t==null?void 0:t.width)/(t==null?void 0:t.height)),(r==null?void 0:r.width)||(r==null?void 0:r.height)?{width:(e=r==null?void 0:r.width)!=null?e:n?Math.round(n*r.height):null,height:(c=r==null?void 0:r.height)!=null?c:n?Math.round(n*r.width):null}:(h==null?void 0:h.width)||(h==null?void 0:h.height)?{width:(u=h==null?void 0:h.width)!=null?u:n?Math.round(n*h.height):null,height:(w=h==null?void 0:h.height)!=null?w:n?Math.round(n*h.width):null}:(t==null?void 0:t.width)||(t==null?void 0:t.height)?{width:(S=t==null?void 0:t.width)!=null?S:null,height:(i=t==null?void 0:t.height)!=null?i:null}:{width:null,height:null}}function q(t){if(!t.data&&!t.src)throw new Error("<Image/>: requires either a 'data' or 'src' prop.");return t.data?M.exports.createElement(b,{...t}):M.exports.createElement(D,{...t})}function b({data:t,width:r,height:h,loading:n,loader:e=R,loaderOptions:c,widths:u,...w}){var $,N,f,E,T;if(!t.url)throw new Error("<Image/>: the 'data' prop requires the 'url' property");const{width:S,height:i}=U({data:t,loaderOptions:c,elementProps:{width:r,height:h}});let y=t.url;if(e&&(y=e({...c,src:t.url,width:S,height:i}),typeof y!="string"||!y))throw new Error(`<Image/>: 'loader' did not return a valid string. ${`Image: ${($=t.id)!=null?$:t.url}`}`);const x=r&&S&&r<S?r:S,v=(N=w.srcSet)!=null?N:d({...c,widths:u,src:t.url,width:x,loader:e});return M.exports.createElement("img",{id:(f=t.id)!=null?f:"",alt:(T=(E=t.altText)!=null?E:w.alt)!=null?T:"",loading:n!=null?n:"lazy",...w,src:y,width:S!=null?S:void 0,height:i!=null?i:void 0,srcSet:v})}function D({src:t,width:r,height:h,alt:n,loader:e,loaderOptions:c,widths:u,loading:w,...S}){var x,v,$,N;if(!r||!h)throw new Error(`<Image/>: when 'src' is provided, 'width' and 'height' are required and need to be valid values (i.e. greater than zero). Provided values: 'src': ${t}, 'width': ${r}, 'height': ${h}`);if(u&&Array.isArray(u)&&u.some(f=>isNaN(f)))throw new Error("<Image/>: the 'widths' property must be an array of numbers");let i=t;if(e&&(i=e({src:t,width:r,height:h,...c}),typeof i!="string"||!i))throw new Error("<Image/>: 'loader' did not return a valid string");let y=(x=S.srcSet)!=null?x:void 0;if(!y&&e&&u){const f=parseInt(h.toString())/parseInt(r.toString());y=(v=u==null?void 0:u.map(E=>parseInt(E,10)))==null?void 0:v.map(E=>`${e({...c,src:t,width:E,height:Math.floor(E*f)})} ${E}w`).join(", ")}return M.exports.createElement("img",{...S,src:i,width:($=c==null?void 0:c.width)!=null?$:r,height:(N=c==null?void 0:c.height)!=null?N:h,alt:n!=null?n:"",loading:w!=null?w:"lazy",srcSet:y})}const A=[352,832,1200,1920,2560];function d({src:t,width:r,crop:h,scale:n,widths:e,loader:c}){const u=e&&Array.isArray(e);if(u&&e.some(i=>isNaN(i)))throw new Error("<Image/>: the 'widths' must be an array of numbers");let w=u?e:A;!u&&r&&r<A[A.length-1]&&(w=A.filter(i=>i<=r));const S=c||_;return w.map(i=>`${S({src:t,width:i,crop:h,scale:n})} ${i}w`).join(", ")}export{q as I,R as s};
//# sourceMappingURL=d6978aec.js.map
