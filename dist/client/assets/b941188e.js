import{r as o,j as e,a,F as y}from"./index.6189f3cc.js";import{Link as g}from"./6de4b88c.js";import"./951108c3.js";import"./39240f87.js";import"./d918c967.js";import"./247fa190.js";import"./0963bb9b.js";import"./d9f18c74.js";import"./11e343ea.js";import"./74769fe0.js";import{u as E}from"./83ddd54b.js";import"./204a9453.js";function G({shopName:r}){const s=E(),[t,n]=o.exports.useState(!1),[l,m]=o.exports.useState(!0),[c,p]=o.exports.useState(""),[w,d]=o.exports.useState(null),[h,x]=o.exports.useState(""),[N,u]=o.exports.useState(null);function v(i){i.preventDefault(),d(null),n(!1),u(null),l?S(i):j(i)}function S(i){i.currentTarget.email.validity.valid?m(!1):d("Please enter a valid email")}async function j(i){const b=i.currentTarget.password.validity;b.valid?(await F({email:c,password:h})).error?(n(!0),f()):s("/account"):u(b.valueMissing?"Please enter a password":"Passwords must be at least 6 characters")}function f(){m(!0),p(""),d(null),x(""),u(null)}return e("div",{className:"flex justify-center my-24 px-4",children:a("div",{className:"max-w-md w-full",children:[e("h1",{className:"text-4xl",children:"Sign in."}),a("form",{noValidate:!0,className:"pt-6 pb-8 mt-4 mb-4",onSubmit:v,children:[t&&e("div",{className:"flex items-center justify-center mb-6 bg-zinc-500",children:e("p",{className:"m-4 text-s text-contrast",children:"Sorry we did not recognize either your email or password. Please try to sign in again or create a new account."})}),l&&e(P,{shopName:r,email:c,setEmail:p,emailError:w}),!l&&e(k,{email:c,resetForm:f}),!l&&e(C,{password:h,setPassword:x,passwordError:N})]})]})})}async function F({email:r,password:s}){try{const t=await fetch("/account/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:r,password:s})});return t.ok?{}:t.json()}catch(t){return{error:t.toString()}}}function P({email:r,setEmail:s,emailError:t,shopName:n}){return a(y,{children:[a("div",{className:"mb-3",children:[e("input",{className:`mb-1 appearance-none rounded border w-full py-2 px-3 text-primary/90 placeholder:text-primary/50 leading-tight focus:shadow-outline ${t?" border-red-500":"border-gray-900"}`,id:"email",name:"email",type:"email",autoComplete:"email",required:!0,placeholder:"Email address","aria-label":"Email address",autoFocus:!0,value:r,onChange:l=>{s(l.target.value)}}),t?a("p",{className:"text-red-500 text-xs",children:[t," \xA0"]}):""]}),e("div",{className:"flex items-center justify-between",children:e("button",{className:"bg-gray-900 rounded text-contrast py-2 px-4 focus:shadow-outline block w-full",type:"submit",children:"Next"})}),e("div",{className:"flex items-center mt-8 border-t  border-gray-300",children:a("p",{className:"align-baseline text-sm mt-6",children:["New to ",n,"? \xA0",e(g,{className:"inline underline",to:"/account/register",children:"Create an account"})]})})]})}function k({email:r,resetForm:s}){return a("div",{className:"mb-3 flex items-center justify-between",children:[a("div",{children:[e("p",{children:r}),e("input",{className:"hidden",type:"text",autoComplete:"username",value:r,readOnly:!0})]}),e("div",{children:e("button",{className:"inline-block align-baseline text-sm underline",type:"button",onClick:s,children:"Change email"})})]})}function C({password:r,setPassword:s,passwordError:t}){return a(y,{children:[a("div",{className:"mb-3",children:[e("input",{className:`mb-1 appearance-none rounded border w-full py-2 px-3 text-primary/90 placeholder:text-primary/50 leading-tight focus:shadow-outline ${t?" border-red-500":"border-gray-900"}`,id:"password",name:"password",type:"password",autoComplete:"current-password",placeholder:"Password","aria-label":"Password",value:r,minLength:8,required:!0,autoFocus:!0,onChange:n=>{s(n.target.value)}}),t?a("p",{className:"text-red-500 text-xs",children:[" ",t," \xA0"]}):""]}),e("div",{className:"flex items-center justify-between",children:e("button",{className:"bg-gray-900 text-contrast rounded py-2 px-4 focus:shadow-outline block w-full",type:"submit",children:"Sign in"})}),a("div",{className:"flex items-center justify-between mt-4",children:[e("div",{className:"flex-1"}),e(g,{className:"inline-block align-baseline text-sm text-primary/50",to:"/account/recover",children:"Forgot password"})]})]})}export{G as AccountLoginForm,F as callLoginApi};
//# sourceMappingURL=b941188e.js.map
