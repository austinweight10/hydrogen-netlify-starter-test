import{r as m,a as u,F as O,j as t}from"./index.6189f3cc.js";import"./6de4b88c.js";import"./951108c3.js";import"./39240f87.js";import"./d918c967.js";import{u as $,S as L}from"./082980fa.js";import"./247fa190.js";import{useProductOptions as C}from"./e1cff8fe.js";import{BaseButton as k}from"./78d6f5a2.js";import{M as I}from"./66b8d4b6.js";import"./0963bb9b.js";import"./d9f18c74.js";import{u as A}from"./f4dc0eb8.js";import"./11e343ea.js";import"./74769fe0.js";import{B as P}from"./44037397.js";import{n as B,I as v,a as T}from"./de1940ea.js";import"./40447271.js";import{T as S}from"./4d9ccbe2.js";/* empty css        */import{r as y}from"./f8f467d1.js";import"./83ddd54b.js";import"./204a9453.js";import"./555f9022.js";import"./b0814017.js";import"./1986dff3.js";import"./ee25ea7a.js";import"./a69c1f44.js";function U(){return typeof document!="undefined"}function R(i){var w;const[e,o]=m.exports.useState(!1),{variantId:l,quantity:s=1,attributes:a,onClick:c,children:r,accessibleAddingToCartLabel:d,...b}=i,{status:g,linesAdd:h}=$(),{selectedVariant:f}=C(),n=(w=l!=null?l:f==null?void 0:f.id)!=null?w:"",p=l===null||n===""||f===null||e||b.disabled;m.exports.useEffect(()=>{e&&g==="idle"&&o(!1)},[g,e]);const x=m.exports.useCallback(()=>{o(!0),h([{quantity:s,merchandiseId:n,attributes:a}])},[h,s,n,a]);return u(O,{children:[t(k,{...b,disabled:p,onClick:c,defaultOnClick:x,children:r}),d?t("p",{style:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},role:"alert","aria-live":"assertive",children:e?d:null}):null]})}function ut(){var h,f;const{pathname:i,search:e}=A(),[o,l]=m.exports.useState(new URLSearchParams(e)),{options:s,setSelectedOption:a,selectedOptions:c,selectedVariant:r}=C(),d=!(r!=null&&r.availableForSale)||!1,b=((h=r==null?void 0:r.priceV2)==null?void 0:h.amount)<((f=r==null?void 0:r.compareAtPriceV2)==null?void 0:f.amount)||!1;m.exports.useEffect(()=>{o||!e||l(new URLSearchParams(e))},[o,e]),m.exports.useEffect(()=>{s.map(({name:n,values:p})=>{if(!o)return;const x=o.get(n.toLowerCase())||null;if(x){const w=p.filter(N=>encodeURIComponent(N.toLowerCase())===x);a(n,w[0])}else o.set(encodeURIComponent(n.toLowerCase()),encodeURIComponent(c[n].toLowerCase())),window.history.replaceState(null,"",`${i}?${o.toString()}`)})},[]);const g=m.exports.useCallback((n,p)=>{a(n,p),o&&(o.set(encodeURIComponent(n.toLowerCase()),encodeURIComponent(p.toLowerCase())),U()&&window.history.replaceState(null,"",`${i}?${o.toString()}`))},[a,o,i]);return u("form",{className:"grid gap-10",children:[t("div",{className:"grid gap-4",children:s.map(({name:n,values:p})=>p.length===1?null:u("div",{className:"flex flex-col flex-wrap mb-4 gap-y-2 last:mb-0",children:[t(B,{as:"legend",size:"lead",className:"min-w-[4rem]",children:n}),t("div",{className:"flex flex-wrap items-baseline gap-4",children:t(j,{name:n,handleChange:g,values:p})})]},n))}),u("div",{className:"grid items-stretch gap-4",children:[t(R,{variantId:r==null?void 0:r.id,quantity:1,accessibleAddingToCartLabel:"Adding item to your cart",disabled:d,children:t(P,{width:"full",variant:d?"secondary":"primary",as:"span",children:d?t(S,{children:"Sold out"}):u(S,{as:"span",className:"flex items-center justify-center gap-2",children:[t("span",{children:"Add to bag"})," ",t("span",{children:"\xB7"})," ",t(I,{withoutTrailingZeros:!0,data:r.priceV2,as:"span"}),b&&t(I,{withoutTrailingZeros:!0,data:r.compareAtPriceV2,as:"span",className:"opacity-50 strike"})]})})}),!d&&t(L,{variantIds:[r.id]})]})]})}function j({values:i,...e}){return i.length>7?t(D,{values:i,...e}):t(F,{values:i,...e})}function F({values:i,name:e,handleChange:o}){const{selectedOptions:l}=C();return t(O,{children:i.map(s=>{const a=l[e]===s,c=`option-${e}-${s}`;return u(S,{as:"label",htmlFor:c,children:[t("input",{className:"sr-only",type:"radio",id:c,name:`option[${e}]`,value:s,checked:a,onChange:()=>o(e,s)}),t("div",{className:`leading-none py-1 border-b-[1.5px] cursor-pointer transition-all duration-200 ${a?"border-primary/50":"border-primary/0"}`,children:s})]},c)})})}function D({values:i,name:e,handleChange:o}){const[l,s]=m.exports.useState(!1),{selectedOptions:a}=C(),c=m.exports.useCallback(r=>{o(e,r)},[e,o]);return t("div",{className:"relative w-full",children:t(y,{onChange:c,value:"",children:({open:r})=>(setTimeout(()=>s(r)),u(O,{children:[u(y.Button,{className:`flex items-center justify-between w-full py-3 px-4 border border-primary ${r?"rounded-b md:rounded-t md:rounded-b-none":"rounded"}`,children:[t("span",{children:a[e]}),t(v,{direction:r?"up":"down"})]}),t(y.Options,{className:`border-primary bg-contrast absolute bottom-12 z-30 grid
                h-48 w-full overflow-y-scroll rounded-t border px-2 py-2 transition-[max-height]
                duration-150 sm:bottom-auto md:rounded-b md:rounded-t-none md:border-t-0 md:border-b ${l?"max-h-48":"max-h-0"}`,children:i.map(d=>{const b=a[e]===d,g=`option-${e}-${d}`;return t(y.Option,{value:d,children:({active:h})=>u("div",{className:`text-primary w-full p-2 transition rounded flex justify-start items-center text-left cursor-pointer ${h?"bg-primary/10":null}`,children:[d,b?t("span",{className:"ml-2",children:t(T,{})}):null]})},g)})})]}))})})}export{ut as ProductForm};
//# sourceMappingURL=89cfb3a4.js.map
